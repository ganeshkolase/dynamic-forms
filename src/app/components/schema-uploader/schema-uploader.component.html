<div class="schema-uploader-container">
  <div [style]="{'margin-bottom': '2rem'}">
    <h1>JSON Schema Uploader</h1>
    <p class="upload-description">
      Upload a JSON file to validate against the FormSchema type definition.
      The file must contain a valid schema with title and fields array.
    </p>

    <p-fileupload
      mode="basic"
      name="schemaFile"
      accept=".json"
      [maxFileSize]="1000000"
      [auto]="true"
      chooseLabel="Choose JSON File"
      (onSelect)="onFileSelect($event)"
      [customUpload]="true"
    >
    </p-fileupload>

    @if (fileName) {
      <div class="file-info">
        <i class="pi pi-file"></i>
        <span>{{ fileName }}</span>
      </div>
    }

    @if (isValid && uploadedSchema) {
      <p-message
        severity="success"
        text="✓ Schema is valid! The JSON file matches the FormSchema type definition."
        [style]="{'margin-top': '1rem', 'display': 'block'}">
      </p-message>
    }

    @if (!isValid && validationErrors.length > 0) {
      <div class="validation-errors">
        <p-message
          severity="error"
          text="✗ Schema validation failed. Please fix the following errors:"
          [style]="{'margin-top': '1rem', 'margin-bottom': '1rem', 'display': 'block'}">
        </p-message>

        <div class="error-list">
          @for (error of validationErrors; track error.path) {
            <div class="error-item">
              <i class="pi pi-times-circle"></i>
              <div class="error-details">
                <strong>{{ error.path }}:</strong>
                <span>{{ error.message }}</span>
              </div>
            </div>
          }
        </div>
      </div>
    }
  </div>
</div>
